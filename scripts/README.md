# ğŸ“ Scripts ç›®å½•è¯´æ˜

## ğŸ¯ ä¿ç•™çš„è„šæœ¬

### æ ¸å¿ƒè¿è¡Œè„šæœ¬

#### `docker_run.ps1` (Windows)
- **ç”¨é€”**: Windows ç¯å¢ƒä¸‹å¯åŠ¨ Docker å®¹å™¨
- **åŠŸèƒ½**:
  - å¯åŠ¨ c2rust-translate Docker ç¯å¢ƒ
  - è‡ªåŠ¨è¿è¡Œæµ‹è¯•
  - æ”¯æŒå®Œæ•´ç¿»è¯‘æ¨¡å¼
- **ä½¿ç”¨**: `.\scripts\docker_run.ps1`
- **çŠ¶æ€**: âœ… æ´»è·ƒä½¿ç”¨

#### `docker_run.sh` (Linux/Mac)
- **ç”¨é€”**: Linux/Mac ç¯å¢ƒä¸‹å¯åŠ¨ Docker å®¹å™¨
- **åŠŸèƒ½**: ä¸ docker_run.ps1 åŠŸèƒ½ç›¸åŒ
- **ä½¿ç”¨**: `./scripts/docker_run.sh`
- **çŠ¶æ€**: âœ… æ´»è·ƒä½¿ç”¨

#### `setup_permissions.sh`
- **ç”¨é€”**: è®¾ç½®è„šæœ¬æ‰§è¡Œæƒé™
- **åŠŸèƒ½**: æ‰¹é‡æ·»åŠ å¯æ‰§è¡Œæƒé™
- **ä½¿ç”¨**: `./scripts/setup_permissions.sh`
- **çŠ¶æ€**: âœ… å·¥å…·è„šæœ¬

---

### å¯é€‰è½¬æ¢å·¥å…·

#### `c_to_rust.py` (184 è¡Œ)
- **ç”¨é€”**: Python å®ç°çš„ Câ†’Rust è½¬æ¢å™¨
- **åŠŸèƒ½**:
  - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ C ä»£ç 
  - ç”ŸæˆåŸºç¡€ Rust ä»£ç æ¡†æ¶
  - è§„åˆ™é©±åŠ¨çš„è½¬æ¢ï¼ˆæ— éœ€ LLMï¼‰
- **ä½¿ç”¨**: `python3 scripts/c_to_rust.py <input.c> <output.rs>`
- **çŠ¶æ€**: âš ï¸ å®éªŒæ€§å·¥å…·ï¼Œå¤‡ç”¨æ–¹æ¡ˆ

#### `translate_intelligent.sh` (485 è¡Œ)
- **ç”¨é€”**: æ™ºèƒ½ Câ†’Rust è½¬æ¢è„šæœ¬
- **åŠŸèƒ½**:
  - è¯»å– C ä»£ç ç»“æ„
  - ç”Ÿæˆåˆç†çš„ Rust æ¡†æ¶
  - æ”¯æŒå¢é‡è½¬æ¢
- **ä½¿ç”¨**: `./scripts/translate_intelligent.sh`
- **çŠ¶æ€**: âš ï¸ é«˜çº§è½¬æ¢å·¥å…·ï¼Œå¯é€‰

#### `translate_single_file.sh` (150 è¡Œ)
- **ç”¨é€”**: å•æ–‡ä»¶ç¿»è¯‘è„šæœ¬
- **åŠŸèƒ½**:
  - åˆ©ç”¨ LLM å¤§ä¸Šä¸‹æ–‡ (1049K)
  - ä¸€æ¬¡æ€§ç¿»è¯‘å•ä¸ª C æ–‡ä»¶
- **ä½¿ç”¨**: `./scripts/translate_single_file.sh <input.c> [output.rs]`
- **çŠ¶æ€**: âš ï¸ LLM å¢å¼ºå·¥å…·ï¼Œå¯é€‰

---

## ğŸ—‘ï¸ å·²æ¸…ç†çš„ä¸´æ—¶è„šæœ¬

ä»¥ä¸‹è„šæœ¬ä¸ºä¸€æ¬¡æ€§ä»»åŠ¡æˆ–å·²å®Œæˆçš„å·¥ä½œï¼Œå·²åˆ é™¤ï¼š

- âŒ `add_hashmap.sh` - æ·»åŠ  hashmap æ¨¡å—ï¼ˆå·²å®Œæˆï¼‰
- âŒ `add_strings.sh` - æ·»åŠ  strings æ¨¡å—ï¼ˆå·²å®Œæˆï¼‰
- âŒ `generate_types.sh` - ç”Ÿæˆ types.rsï¼ˆå·²å®Œæˆï¼‰
- âŒ `generate_final_report.sh` - ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šï¼ˆä¸€æ¬¡æ€§ï¼‰
- âŒ `test_simple_translation.sh` - ç®€å•ç¿»è¯‘æµ‹è¯•ï¼ˆä¸´æ—¶ï¼‰
- âŒ `test_translation.sh` - ç¿»è¯‘æµ‹è¯•ï¼ˆä¸´æ—¶ï¼‰
- âŒ `translate_chibicc_full.sh` - chibicc å®Œæ•´ç¿»è¯‘ï¼ˆå·²å®Œæˆï¼‰
- âŒ `translate_complete.sh` - å®Œæ•´ç¿»è¯‘è„šæœ¬ï¼ˆæ—§ç‰ˆï¼‰
- âŒ `translate_with_python.sh` - Python è¾…åŠ©ç¿»è¯‘ï¼ˆå®éªŒæ€§ï¼‰

**æ¸…ç†æ•ˆæœ**: ä» 15 ä¸ªè„šæœ¬å‡å°‘åˆ° 6 ä¸ª (-60%)

---

## ğŸ“‹ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

```bash
# Windows ç”¨æˆ·
.\scripts\docker_run.ps1

# Linux/Mac ç”¨æˆ·
./scripts/setup_permissions.sh  # é¦–æ¬¡è¿è¡Œ
./scripts/docker_run.sh
```

### é«˜çº§ç”¨é€”

```bash
# ä½¿ç”¨ Python è½¬æ¢å·¥å…·
python3 scripts/c_to_rust.py input.c output.rs

# æ™ºèƒ½è½¬æ¢ï¼ˆDocker å†…ï¼‰
docker exec -it c2rust-translate /workspace/scripts/translate_intelligent.sh

# å•æ–‡ä»¶ LLM ç¿»è¯‘ï¼ˆéœ€é…ç½® API Keyï¼‰
./scripts/translate_single_file.sh tokenize.c tokenize.rs
```

---

## ğŸ”§ ç»´æŠ¤å»ºè®®

### ä½•æ—¶åˆ é™¤å¯é€‰è„šæœ¬

å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œå¯ä»¥åˆ é™¤å¯é€‰è„šæœ¬ï¼š
1. âœ… å·²å®Œæˆæ‰€æœ‰ chibicc æ¨¡å—è½¬æ¢
2. âœ… ä¸å†éœ€è¦å®éªŒæ€§è½¬æ¢å·¥å…·
3. âœ… åªä½¿ç”¨ä¸»ç¨‹åº C2RustAgent

åˆ é™¤å‘½ä»¤ï¼š
```bash
cd scripts
rm c_to_rust.py translate_intelligent.sh translate_single_file.sh
```

### ä½•æ—¶ä¿ç•™å¯é€‰è„šæœ¬

å»ºè®®ä¿ç•™çš„æƒ…å†µï¼š
1. ğŸ”„ æœªæ¥å¯èƒ½è½¬æ¢å…¶ä»– C é¡¹ç›®
2. ğŸ§ª éœ€è¦å¯¹æ¯”ä¸åŒè½¬æ¢æ–¹æ³•çš„æ•ˆæœ
3. ğŸ› ï¸ ä½œä¸º C2RustAgent çš„è¡¥å……å·¥å…·

---

## ğŸ“Š è„šæœ¬ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | æ€»ä»£ç è¡Œæ•° |
|------|------|------------|
| æ ¸å¿ƒè„šæœ¬ | 3 | ~350 è¡Œ |
| å¯é€‰å·¥å…· | 3 | ~819 è¡Œ |
| **æ€»è®¡** | **6** | **~1169 è¡Œ** |

**å·²åˆ é™¤**: 9 ä¸ªä¸´æ—¶è„šæœ¬

---

## ğŸ’¡ æ¨èé…ç½®

**æœ€å°åŒ–é…ç½®** (ä»…æ ¸å¿ƒåŠŸèƒ½):
```
scripts/
â”œâ”€â”€ docker_run.ps1          âœ… å¿…éœ€
â”œâ”€â”€ docker_run.sh           âœ… å¿…éœ€
â””â”€â”€ setup_permissions.sh    âœ… å¿…éœ€
```

**å®Œæ•´é…ç½®** (åŒ…å«å¯é€‰å·¥å…·):
```
scripts/
â”œâ”€â”€ docker_run.ps1          âœ… å¿…éœ€
â”œâ”€â”€ docker_run.sh           âœ… å¿…éœ€
â”œâ”€â”€ setup_permissions.sh    âœ… å¿…éœ€
â”œâ”€â”€ c_to_rust.py            âš ï¸ å¯é€‰
â”œâ”€â”€ translate_intelligent.sh âš ï¸ å¯é€‰
â””â”€â”€ translate_single_file.sh âš ï¸ å¯é€‰
```

---

**æ›´æ–°æ—¶é—´**: 2025-01-20  
**ç»´æŠ¤è€…**: C2RustAgent é¡¹ç›®ç»„
